# Chat Agent Matrix - Telegram Edition

> **åŸºæ–¼ Telegram å”ä½œä»‹é¢çš„å…¨æ–¹ä½é ç«¯ AI ä»£ç†ç³»çµ±**
> 
> æœ¬å°ˆæ¡ˆæä¾›ä¸€å¥—å®Œæ•´çš„è‡ªå‹•åŒ–æ¡†æ¶ï¼Œå°‡ Telegram è½‰åŒ–ç‚ºé«˜æ•ˆèƒ½çš„é ç«¯ AI æŒ‡æ®ä¸­å¿ƒã€‚é€éæ•´åˆè‡ªå‹•åŒ–å®‰å…¨éš§é“ã€Webhook å‹•æ…‹ç¶å®šåŠçµ‚ç«¯æ¨¡æ“¬æŠ€è¡“ï¼Œå¯¦ç¾è·¨åœ°åŸŸçš„ç³»çµ±å”ä½œèˆ‡è³‡è¨Šä»£ç†ã€‚

## ğŸŒŸ æ ¸å¿ƒæŠ€è¡“å„ªå‹¢

*   **è‡ªå‹•åŒ–ç¶²è·¯é€£ç·šç®¡ç†**ï¼šå…§å»ºè‡ªå‹•åŒ–è…³æœ¬è§£æ±º ngrok å‹•æ…‹ URL è®Šå‹•å•é¡Œï¼Œç¢ºä¿ Webhook æœå‹™çš„æŒçºŒæ€§ã€‚
*   **å¤šå¼•æ“å”ä½œæ¶æ§‹**ï¼šæ”¯æ´ Claude Code (æ·±åº¦é‚è¼¯èˆ‡ç¨‹å¼ç¢¼è™•ç†) èˆ‡ Google Gemini (é«˜é€Ÿè³‡è¨Šæª¢ç´¢) é›™å¼•æ“åˆ‡æ›ã€‚
*   **å¤šæ¨¡æ…‹åœ–ç‰‡æ”¯æ´**ï¼šå…·å‚™è‡ªå‹•åŒ–åœ–ç‰‡è½åœ°èˆ‡åˆ†ææ©Ÿåˆ¶ï¼Œæ”¯æ´ç™¼é€åœ–ç‰‡é€²è¡Œå³æ™‚æ‘˜è¦èˆ‡æ–‡å­—æå–ã€‚
*   **äº’å‹•å¼çµ„ä»¶æ”¯æ´**ï¼šå®Œæ•´æ”¯æ´ Telegram éµç›¤é¸å–® (Reply Keyboard) èˆ‡è‡ªå®šç¾©æŒ‡ä»¤æ¨¡æ¿ï¼Œå„ªåŒ–æ“ä½œæ•ˆç‡ã€‚
*   **éåŒæ­¥é€šçŸ¥æ©Ÿåˆ¶**ï¼šé€éç›£è½çµ‚ç«¯è¼¸å‡ºï¼Œå¯¦ç¾åŸ·è¡Œçµæœçš„å³æ™‚å›å ±ã€‚
*   **å¤šå¯¦ä¾‹ç¨ç«‹éƒ¨ç½²**ï¼šåŒä¸€å°æ©Ÿå™¨å¯é‹è¡Œå¤šå€‹å®Œå…¨ç¨ç«‹çš„å¯¦ä¾‹ï¼Œæ¯å€‹å¯¦ä¾‹æœ‰è‡ªå·±çš„é…ç½®ã€ç’°å¢ƒè®Šæ•¸å’Œ ngrok éš§é“ï¼Œç„¡éœ€è¤‡è£½ä»£ç¢¼ã€‚
*   **é…ç½®èˆ‡ç’°å¢ƒéš”é›¢**ï¼šæ¯å€‹ Agent çš„èªè­‰å’Œé…ç½®å®Œå…¨åˆ†é›¢ï¼Œå®¹å™¨å…§éƒ¨è®Šå‹•ä¸å½±éŸ¿ä¸»æ©Ÿæºä»£ç¢¼ï¼Œä¾¿æ–¼ç®¡ç†å’Œç¶­è­·ã€‚

---

## ğŸš€ éƒ¨ç½²æŒ‡å— (Deployment Guide)

### 1. ç’°å¢ƒåˆå§‹åŒ–èˆ‡é…ç½®
åŸ·è¡Œæ•´åˆå®‰è£è…³æœ¬ï¼Œç³»çµ±å°‡è‡ªå‹•é…ç½®é‹ä½œç’°å¢ƒï¼Œä¸¦å•Ÿå‹• **äº’å‹•å¼è¨­å®šç²¾éˆ** å¼•å°æ‚¨è¼¸å…¥å¿…è¦çš„æ†‘è­‰ï¼ˆngrok Tokenã€Telegram Token ç­‰ï¼‰ï¼š

```bash
./install_dependencies.sh
```

> **æç¤º**ï¼šè‹¥æ—¥å¾Œéœ€è¦ä¿®æ”¹è¨­å®šï¼Œå¯ç›´æ¥åŸ·è¡Œ `./setup_config.sh` å•Ÿå‹•è¨­å®šç²¾éˆï¼Œç„¡éœ€æ‰‹å‹•ç·¨è¼¯æª”æ¡ˆã€‚

### 2. ç²å–æ†‘è­‰èªªæ˜
#### A. ngrok Authtoken (å¿…è¦)
1. è¨»å†Šä¸¦ç™»å…¥ [ngrok Dashboard](https://dashboard.ngrok.com/get-started/your-authtoken)ã€‚
2. åœ¨é é¢ä¸Šæ–¹æ‰¾åˆ° **Your Authtoken**ã€‚
3. è¤‡è£½è©² Tokenï¼ˆä»¥ `2...` é–‹é ­çš„é•·å­—ä¸²ï¼‰ï¼Œç¨å¾Œåœ¨å®‰è£ç²¾éˆä¸­å¡«å…¥ã€‚

#### B. TELEGRAM_BOT_TOKEN
1. åœ¨ Telegram ä¸­æœå°‹å®˜æ–¹å¸³è™Ÿ **@BotFather** ä¸¦é–‹å•Ÿå°è©±ã€‚
2. ç™¼é€ `/newbot` æŒ‡ä»¤ï¼Œä¾æç¤ºè¼¸å…¥æ©Ÿå™¨äººåç¨±ã€‚
3. å‰µå»ºæˆåŠŸå¾Œï¼ŒBotFather æœƒæä¾›ä¸€çµ„ **HTTP API Token**ã€‚
4. **é‡è¦**ï¼šè«‹é»æ“Šæ©Ÿå™¨äººé€£çµä¸¦ç™¼é€è‡³å°‘ä¸€å‰‡è¨Šæ¯ï¼ˆå¦‚ `/start`ï¼‰ä»¥å•Ÿå‹•é€šè¨Šã€‚

#### B. å€‹äºº TELEGRAM_CHAT_ID
1. ç¢ºä¿å·²åœ¨è¨­å®šç²¾éˆä¸­å¡«å…¥ Tokenã€‚
2. åœ¨ Telegram ä¸­ç™¼é€ä»»ä½•è¨Šæ¯ï¼ˆå¦‚ `/start`ï¼‰çµ¦æ‚¨çš„æ©Ÿå™¨äººã€‚
3. **è¨­å®šç²¾éˆæœƒè‡ªå‹•åµæ¸¬**ä¸¦æŠ“å–æ‚¨çš„å€‹äºº IDï¼Œæ‚¨åªéœ€æŒ‰ Enter ç¢ºèªå³å¯ã€‚
4. è‹¥è‡ªå‹•åµæ¸¬å¤±æ•—ï¼Œäº¦å¯æ‰‹å‹•è¼¸å…¥ã€‚

### 3. é€²éšé…ç½® (å¯é¸)
è‹¥éœ€èª¿æ•´ AI Agent åˆ—è¡¨æˆ–è‡ªå®šç¾©é¸å–®ï¼Œè«‹ç·¨è¼¯ **`config.yaml`**ï¼š
```bash
nano config.yaml
```
> **æ³¨æ„**ï¼šæ•æ„Ÿè³‡è¨Š (Token/ID) å·²ç§»è‡³ `.env` æª”æ¡ˆç®¡ç†ã€‚è‹¥éœ€ä¿®æ”¹æ†‘è­‰ï¼Œè«‹åŸ·è¡Œ `./setup_config.sh`ã€‚

### 4. å•Ÿå‹•æœå‹™
åŸ·è¡Œä¸»å•Ÿå‹•è…³æœ¬ï¼Œç³»çµ±å°‡è‡ªå‹•å®Œæˆéš§é“å»ºç«‹ã€Webhook è¨»å†ŠåŠå„é …æœå‹™åˆå§‹åŒ–ï¼š

```bash
./start_all_services.sh
```

---




---

## ğŸ³ å®¹å™¨åŒ–éƒ¨ç½² (Dockerized Deployment)

æœ¬å°ˆæ¡ˆæ”¯æ´åŸºæ–¼ Docker çš„é«˜éš”é›¢éƒ¨ç½²æ–¹æ¡ˆï¼Œæ¡ç”¨ **ISC (Instance-Specific Config)** æ¶æ§‹ï¼Œç¢ºä¿å¤šå€‹éƒ¨ç½²å¯¦ä¾‹é–“çš„ç‰©ç†éš”é›¢èˆ‡ç’°å¢ƒä¸€è‡´æ€§ã€‚
> **æç¤º**ï¼šè‹¥æœ‰å¤§è¦æ¨¡å¯¦ä¾‹ä¹‹éƒ¨ç½²éœ€æ±‚ï¼Œå¯åƒè€ƒ [ngrok æ–¹æ¡ˆèˆ‡é™åˆ¶èªªæ˜](https://ngrok.com/docs/pricing-limits) ä»¥è©•ä¼°é€£ç·šé »å¯¬èˆ‡éš§é“éœ€æ±‚ã€‚


### 1. éƒ¨ç½²æ‰‹é †æµç¨‹

#### A. åˆå§‹åŒ–å¯¦ä¾‹é…ç½®
é€²å…¥éƒ¨ç½²ç›®éŒ„ä¸¦å•Ÿå‹•ç²¾éˆï¼Œè¼¸å…¥å¯¦ä¾‹åç¨± (å¦‚ `dev`)ï¼š
```bash
cd docker-deploy
./setup_docker.sh
```
> **ç”¢å‡ºæª”æ¡ˆ**ï¼šç³»çµ±å°‡ç”Ÿæˆ `.env.dev`ã€`config.dev.yaml` èˆ‡ `docker-compose.dev.yml`ã€‚

#### B. åŸ·è¡Œã€Œä¸»æ©Ÿç«¯é ç†±ã€èªè­‰
ç‚ºäº†ç¢ºä¿ AI å¼•æ“ Token èƒ½æ­£ç¢ºåŒæ­¥è‡³å®¹å™¨ï¼Œè«‹å…ˆåœ¨ä¸»æ©Ÿç«¯å®Œæˆ OAuth æˆæ¬Šï¼š
```bash
bash ./agent_credential_wizard.sh
```
*   **ä½œç”¨**ï¼šèªè­‰è³‡æ–™å°‡ç›´æ¥å­˜å…¥ä¸»æ©Ÿçš„ `agent_home/` ç›®éŒ„ï¼Œä¾›å®¹å™¨å•Ÿå‹•å¾Œæ›è¼‰ç¹¼æ‰¿ã€‚

#### C. æ§‹å»ºä¸¦å•Ÿå‹•å®¹å™¨
ä½¿ç”¨ Docker Compose é€²è¡Œé¡åƒå›ºåŒ–ä¸¦å•Ÿå‹•æœå‹™ï¼š
```bash
docker compose -f docker-compose.yml -f docker-compose.dev.yml build
docker compose -f docker-compose.yml -f docker-compose.dev.yml up -d
```

### 2. æ ¸å¿ƒæŠ€è¡“ç‰¹æ€§

*   **UAH (User Agent Home) ç‰©ç†éš”é›¢**ï¼šæ¯å€‹ Agent æ“æœ‰ç¨ç«‹çš„æ›è¼‰å®¶ç›®éŒ„ï¼Œ`HOME` è®Šæ•¸åœ¨å®¹å™¨å…§è¢«ç²¾æº–åŠ«æŒï¼Œé˜²æ­¢æ†‘è­‰äº¤å‰æ±¡æŸ“ã€‚
*   **é¡åƒå›ºåŒ– (Image Hardening)**ï¼šåŸå§‹ç¢¼åœ¨å»ºæ§‹éšæ®µå³ `COPY` é€²å…¥é¡åƒï¼Œå®¹å™¨å…§éƒ¨çš„è®Šå‹•ä¸æœƒå½±éŸ¿ä¸»æ©ŸåŸå§‹ç¢¼ï¼Œé”æˆçœŸæ­£çš„é‹ä½œç’°å¢ƒéš”é›¢ã€‚
*   **éš”é›¢æ€§æ˜ å°„**ï¼šé€é Volume å°‡å¯¦ä¾‹å°ˆå±¬çš„ `config.{inst}.yaml` èˆ‡ `.env.{inst}` è‡ªå‹•å°é½Šç‚ºå®¹å™¨å…§çš„æ¨™æº–è·¯å¾‘ï¼Œå¯¦ç¾ã€Œä¸€å¥—ä»£ç¢¼ã€å¤šé‡å¯¦ä¾‹ã€ã€‚

---
## ğŸ–¥ï¸ tmux æ“ä½œæŒ‡å¼• (tmux Guide)

æœ¬ç³»çµ±åˆ©ç”¨ tmux åœ¨èƒŒæ™¯ç¶­æŒ AI å¼•æ“èˆ‡ Webhook ä¼ºæœå™¨çš„é‹è¡Œã€‚ä»¥ä¸‹ç‚ºå¸¸ç”¨æ“ä½œï¼š

### 1. é€²å…¥/é€£æ¥ Session
è‹¥è¦æŸ¥çœ‹ AI é‹è¡Œç‹€æ³æˆ–åµéŒ¯ï¼Œè«‹åŸ·è¡Œï¼š
```bash
tmux attach -t ai_telegram_session
```

### 2. è¦–çª—åˆ‡æ›èˆ‡å¸¸ç”¨å¿«æ·éµ
é€²å…¥ tmux å¾Œï¼Œå¯ä½¿ç”¨ä»¥ä¸‹çµ„åˆéµï¼ˆé è¨­å‰ç¶´éµç‚º `Ctrl+B`ï¼‰ï¼š

*   **`Ctrl+B` éš¨å¾ŒæŒ‰ `0`**ï¼šåˆ‡æ›è‡³ AI å¼•æ“è¦–çª— (Claude/Gemini)ã€‚
*   **`Ctrl+B` éš¨å¾ŒæŒ‰ `1`**ï¼šåˆ‡æ›è‡³ Telegram API ä¼ºæœå™¨è¦–çª—ã€‚
*   **`Ctrl+B` éš¨å¾ŒæŒ‰ `2`**ï¼šåˆ‡æ›è‡³ ngrok éš§é“ç›£æ§è¦–çª—ã€‚
*   **`Ctrl+B` éš¨å¾ŒæŒ‰ `D`**ï¼š**åˆ†é›¢ (Detach)** Sessionã€‚æ­¤æ“ä½œæœƒè®“æ‚¨å›åˆ°æ™®é€šçµ‚ç«¯æ©Ÿï¼Œä½†æœå‹™ä»æœƒåœ¨èƒŒæ™¯æŒçºŒé‹è¡Œã€‚

---

## âš™ï¸ é€²éšé…ç½® (Advanced Configuration)

### è‡ªå®šç¾©é¸å–® (menu)
æœ¬ç³»çµ±æ”¯æ´é€é `config.yaml` ä¸­çš„ `menu` é™£åˆ—ä¾†è‡ªå®šç¾© Telegram çš„äº’å‹•å¼é¸å–®ã€‚

#### YAML æ•¸æ“šçµæ§‹ç¯„ä¾‹
```yaml
menu:
  # ç¬¬ä¸€è¡Œï¼šæœ‰å…©å€‹æŒ‰éˆ•
  - - label: "ğŸŒ¤ å¤©æ°£æŸ¥è©¢"
      command: "æŸ¥è©¢ä»Šæ—¥å¤©æ°£ç‹€æ…‹"
    - label: "ğŸ“Š ç³»çµ±ç›£æ§"
      command: "/status"
      
  # ç¬¬äºŒè¡Œï¼šåªæœ‰ä¸€å€‹æŒ‰éˆ•
  - - label: "ğŸ”„ åˆ‡æ›å°è±¡"
      command: "/switch"
      prompt: "è«‹è¼¸å…¥ Agent åç¨±:"
```

**ğŸ’¡ YAML æ’ç‰ˆè¦å‰‡ (éµç›¤ä½ˆå±€)ï¼š**
*   `menu` å°æ‡‰åˆ° Telegram çš„éµç›¤ï¼Œæ˜¯ä¸€å€‹äºŒç¶­é™£åˆ—ã€‚
*   **`- -` (é›™ç ´æŠ˜è™Ÿ)**ï¼šä»£è¡¨ **æ–°çš„ä¸€è¡Œ (Row)** çš„é–‹å§‹ã€‚
*   **`  -` (ç¸®æ’ + å–®ç ´æŠ˜è™Ÿ)**ï¼šä»£è¡¨ **åŒä¸€è¡Œ** ä¸­çš„ä¸‹ä¸€å€‹æŒ‰éˆ•ã€‚
*   é€éèª¿æ•´ç¸®æ’èˆ‡ç ´æŠ˜è™Ÿï¼Œæ‚¨å¯ä»¥è‡ªç”±è¨­è¨ˆ 2x2ã€3x1 ç­‰å„ç¨®æŒ‰éˆ•æ’åˆ—ã€‚

*   **label**: æŒ‰éˆ•é¡¯ç¤ºä¹‹æ¨™ç±¤æ–‡å­—ã€‚
*   **command**: è§¸ç™¼å¾Œç™¼é€è‡³ AI å¼•æ“çš„æŒ‡ä»¤å­—ä¸²ã€‚

### å¤šæ¨¡æ…‹åœ–ç‰‡è™•ç†èˆ‡éš”é›¢
ç³»çµ±å…·å‚™è‡ªå‹•åŒ–åœ–ç‰‡è½åœ°èˆ‡éš”é›¢æ©Ÿåˆ¶ï¼š
*   **éš”é›¢å„²å­˜**: åœ–ç‰‡æœƒæ ¹æ“šç•¶å‰æ´»èº Agent å­˜å…¥å…¶å°ˆå±¬ç›®éŒ„ï¼š`agent_home/{name}/images_temp/`ã€‚
*   **ä¿ç•™æ©Ÿåˆ¶**: æ”¯æ´å·®ç•°åŒ–æ¸…ç†ï¼Œå¯åœ¨å„ Agent é…ç½®ä¸­è¨­å®š `images_retention_days`ï¼ˆé è¨­ 7 å¤©ï¼‰ï¼Œç³»çµ±æ¯æ—¥è‡ªå‹•æƒæä¸¦æ¸…ç†ã€‚

### AI Agent è»åœ˜èˆ‡å”ä½œé…ç½®
æ‚¨å¯ä»¥åœ¨ `config.yaml` ä¸­å®šç¾©å¤šå€‹ Agentï¼Œä¸¦é€éã€Œå”ä½œç¾¤çµ„ã€è®“å®ƒå€‘å…±äº«ç”¢å‡ºï¼š

```yaml
agents:
  - name: "GÃ¼pa"
    engine: "gemini"
    usecase: "è² è²¬ç ”ç©¶èˆ‡æ‘˜è¦..."
    cleanup_policy:
      images_retention_days: 3  # å·®ç•°åŒ–æ¸…ç†

# å”ä½œç¾¤çµ„ï¼šæˆå“¡é–“æœƒè‡ªå‹•å»ºç«‹é›™å‘å…±äº«ç©ºé–“ (è»Ÿé€£çµ)
collaboration_groups:
  - name: "core_team"
    members: ["GÃ¼pa", "ChÃ¶d"]
```

### æ’ç¨‹ä»»å‹™ç³»çµ± (Scheduler)
æ”¯æ´ Cron èˆ‡ Interval å…©ç¨®æ¨¡å¼ï¼Œè®“ Agent ä¸»å‹•åŸ·è¡Œä»»å‹™ï¼š

```yaml
scheduler:
  - name: "æ¯æ—¥æ¸…ç†"
    type: "system"
    action: "cleanup_images"
    trigger: "interval"
    hour: 24
  - name: "å®šæœŸå›å ±"
    type: "agent_command"
    agent: "GÃ¼pa"
    command: "è«‹æä¾›æœ€æ–°çš„å¸‚å ´æ‘˜è¦"
    trigger: "cron"
    hour: 9
    minute: 0
```

#### åˆ‡æ›èˆ‡å”ä½œæŒ‡ä»¤
| æŒ‡ä»¤ | ç”¨é€” |
|------|------|
| `/switch [name]` | åˆ‡æ›ç•¶å‰å°è©±çš„ Agent (æ”¯æ´æ¨¡ç³Šæœå°‹ï¼Œå¦‚ `/switch chod`) |
| `/inspect [name]` | **ç›£æ§æ¨¡å¼**ï¼šæ´¾é£ç•¶å‰ Agent å»æª¢æŸ¥ç›®æ¨™ Agent çš„çµ‚ç«¯æ©Ÿç•«é¢ |
| `/fix [name]` | **æ€¥æ•‘æ¨¡å¼**ï¼šç”±ç³»çµ±ç›´æ¥ä»‹å…¥é‡å•Ÿç›®æ¨™ Agent ä¸¦å˜—è©¦æ¢å¾©è¨˜æ†¶ |
| `/resume_latest` | **æ¢å¾©è¨˜æ†¶**ï¼šè‡ªå‹•æ¢å¾©ç•¶å‰ Agent æœ€è¿‘ä¸€æ¬¡çš„å°è©±ç´€éŒ„ |

---

## ğŸ› ï¸ æŠ€è¡“æ¶æ§‹èˆ‡çµ„ä»¶èªªæ˜ (Technical Overview)

### ğŸ“‚ ç›®éŒ„çµæ§‹ (Directory Structure)
```text
telegram/
â”œâ”€â”€ .env                             # ç’°å¢ƒè®Šæ•¸æª”æ¡ˆ (è‡ªå‹•ç”Ÿæˆ)
â”œâ”€â”€ agent_credential_wizard.sh       # AI å¼•æ“èªè­‰åŠ©æ‰‹ (ä¸»æ©Ÿç«¯é ç†±)
â”œâ”€â”€ config.py                        # é…ç½®è®€å–èˆ‡é©—è­‰æ¨¡çµ„
â”œâ”€â”€ config.yaml                      # ç³»çµ±è¡Œç‚ºèˆ‡ Agent å®šç¾©æª”
â”œâ”€â”€ install_dependencies.sh          # ç’°å¢ƒåˆå§‹åŒ–å®‰è£è…³æœ¬
â”œâ”€â”€ message_templates.yaml           # é€šçŸ¥è¨Šæ¯æ¨¡æ¿
â”œâ”€â”€ setup_config.sh                  # äº’å‹•å¼è¨­å®šç²¾éˆ (åŸç”Ÿç’°å¢ƒ)
â”œâ”€â”€ start_all_services.sh            # ä¸»å•Ÿå‹•è…³æœ¬ (tmux + Flask + Agent)
â”œâ”€â”€ start_ngrok.sh                   # ngrok éš§é“å•Ÿå‹•å™¨
â”œâ”€â”€ status_telegram_services.sh      # ç³»çµ±ç‹€æ…‹æª¢æŸ¥å·¥å…·
â”œâ”€â”€ stop_telegram_services.sh        # ç³»çµ±åœæ­¢å·¥å…·
â”œâ”€â”€ telegram_notifier.py             # Telegram è¨Šæ¯ç™¼é€æ¨¡çµ„
â”œâ”€â”€ telegram_webhook_server.py       # Flask Webhook ä¼ºæœå™¨
â”œâ”€â”€ agent_home/                      # Agent å°ˆå±¬å·¥ä½œç©ºé–“ (è‡ªå‹•ç”Ÿæˆ)
â”‚   â”œâ”€â”€ GÃ¼pa/                        # Agent ç¯„ä¾‹: GÃ¼pa (Gemini)
â”‚   â”‚   â”œâ”€â”€ GEMINI.md                # è‡ªæˆ‘èªçŸ¥èˆ‡æ“ä½œè¦ç¯„
â”‚   â”‚   â”œâ”€â”€ knowledge/               # å°ˆå±¬çŸ¥è­˜åº«
â”‚   â”‚   â”œâ”€â”€ my_shared_space/         # å·¥ä½œç”¢å‡ºå­˜æ”¾å€
â”‚   â”‚   â””â”€â”€ ChÃ¶d_shared_space@       # å”ä½œé€£çµ (æŒ‡å‘å¤¥ä¼´çš„å…±äº«å€)
â”‚   â””â”€â”€ ChÃ¶d/                        # Agent ç¯„ä¾‹: ChÃ¶d (Claude)
â”œâ”€â”€ docker-deploy/                   # å®¹å™¨åŒ–éƒ¨ç½²è³‡æº
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ entrypoint.sh            # å®¹å™¨å•Ÿå‹•å…¥å£è…³æœ¬
â”‚   â”œâ”€â”€ setup_docker.sh              # å¯¦ä¾‹åŒ–éƒ¨ç½²ç²¾éˆ
â”‚   â”œâ”€â”€ generate_config.py           # ISC é…ç½®ç”Ÿæˆå¼•æ“
â”‚   â”œâ”€â”€ Dockerfile                   # é¡åƒå›ºåŒ–å®šç¾© (å¤šå¯¦ä¾‹éš”é›¢)
â”‚   â”œâ”€â”€ docker-compose.template.yml  # å¤šå¯¦ä¾‹ç·¨æ’æ¨¡æ¿
â”‚   â”œâ”€â”€ docker-compose.{inst}.yml    # åŸºç¤æœå‹™ç·¨æ’
â”‚   â”œâ”€â”€ config.{inst}.yaml           # å¯¦ä¾‹é…ç½®ç¯„ä¾‹ (éš”é›¢æª”)
â”‚   â””â”€â”€ .env.{inst}                  # å¯¦ä¾‹ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹ (éš”é›¢æª”)
â””â”€â”€ telegram_scripts/                # è¼”åŠ©åŠŸèƒ½è…³æœ¬ (Scheduler, Env Setup)
```

### æ ¸å¿ƒçµ„ä»¶è·è²¬
| çµ„ä»¶åç¨± | æª”æ¡ˆè·¯å¾‘ | åŠŸèƒ½æè¿° |
| :--- | :--- | :--- |
| **é…ç½®è¼‰å…¥å™¨** | `config.py` | è®€å– `.env` èˆ‡ `config.yaml`ï¼Œæ”¯æ´ä¸‰å±¤ç–ŠåŠ  (Base YAML â†’ Instance YAML â†’ Environment)ã€‚ |
| **é…ç½®ç”Ÿæˆå™¨** | `docker-deploy/generate_config.py` | **(å®¹å™¨å°ˆç”¨)** è² è²¬ç”Ÿæˆ ISC å¯¦ä¾‹é…ç½®èˆ‡ docker-compose ç‰©ç†æ›è¼‰æ˜ å°„ã€‚ |
| **å…¥å£è…³æœ¬** | `docker-deploy/scripts/entrypoint.sh` | **(å®¹å™¨å°ˆç”¨)** è² è²¬åˆå§‹åŒ–å®¹å™¨ç’°å¢ƒä¸¦å§”æ´¾å•Ÿå‹•æŒ‡ä»¤è‡³ `start_all_services.sh`ã€‚ |
| **é¡åƒå®šç¾©** | `docker-deploy/Dockerfile` | å®šç¾© AI Agent é‹ä½œç’°å¢ƒã€ç³»çµ±ä¾è³´èˆ‡ä»£ç¢¼å›ºåŒ–é‚è¼¯ (æ”¯æ´å‹•æ…‹ BUILD_USER)ã€‚ |
| **æœå‹™ç·¨æ’** | `docker-deploy/docker-compose.template.yml` | å¤šå¯¦ä¾‹ç·¨æ’æ¨¡æ¿ï¼Œè‡ªå‹•ç”Ÿæˆ `docker-compose.{instance}.yml` å¯¦ä¾‹é…ç½®ã€‚ |
| **èªè­‰åŠ©æ‰‹** | `agent_credential_wizard.sh` | ä¸»æ©Ÿç«¯ OAuth é ç†±ï¼Œåœ¨å®¹å™¨æ›è¼‰å‰å®Œæˆ AI å¼•æ“èªè­‰ (Gemini/Claude)ã€‚ |

### ç¶­é‹è…³æœ¬æ¸…å–®
| æª”æ¡ˆåç¨± | åŠŸèƒ½æè¿° |
| :--- | :--- |
| `start_all_services.sh` | **ä¸»å•Ÿå‹•è…³æœ¬**ã€‚å»ºç«‹ tmux æœƒè©±ï¼Œåˆå§‹åŒ–ç’°å¢ƒä¸¦å–šé†’æ‰€æœ‰ Agentã€‚ |
| `start_ngrok.sh` | **é€£ç·šè‡ªå‹•åŒ–**ã€‚å•Ÿå‹•éš§é“ä¸¦è‡ªå‹•æ›´æ–° Webhook URLã€‚ |
| `setup_config.sh` | **é…ç½®ç²¾éˆ**ã€‚äº¤äº’å¼è¨­å®š Bot Tokenã€Chat ID èˆ‡ç’°å¢ƒè®Šæ•¸ã€‚ |
| `setup_docker.sh` | **éƒ¨ç½²ç²¾éˆ**ã€‚**(ä½æ–¼ docker-deploy/)** ä¸€éµç”Ÿæˆå¯¦ä¾‹é…ç½®ã€æ†‘è­‰ä¸¦æ§‹å»ºé¡åƒã€‚ |
| `agent_credential_wizard.sh` | **èªè­‰åŠ©æ‰‹**ã€‚åœ¨ä¸»æ©Ÿç«¯å®Œæˆ AI èªè­‰ä»¥é¿å…å®¹å™¨å…§äº¤äº’é˜»å¡ã€‚ |

---

## ğŸ”’ å®‰å…¨æ€§èªªæ˜ (Security)

1.  **èº«åˆ†é©—è­‰**ï¼šç³»çµ±å¼·åˆ¶æª¢æŸ¥ `TELEGRAM_CHAT_ID`ã€‚é™¤éç™¼é€è€… ID ç¬¦åˆç™½åå–®ï¼Œå¦å‰‡ Webhook ä¼ºæœå™¨å°‡æ‹’çµ•ä»»ä½•æŒ‡ä»¤è™•ç†ã€‚
2.  **éš”é›¢ç’°å¢ƒ**ï¼šAI å¼•æ“é‹è¡Œæ–¼ç¨ç«‹çš„ tmux æœƒè©±ä¸­ï¼Œèˆ‡ API æœå‹™å™¨è§£è€¦ï¼Œç¢ºä¿ç³»çµ±ç©©å®šæ€§ã€‚
3.  **åŠ å¯†å‚³è¼¸**ï¼šæ‰€æœ‰å°å¤–é€šè¨Šçš†é€é ngrok æä¾›çš„ TLS 1.2+ åŠ å¯†éš§é“å‚³è¼¸ã€‚

## ğŸ“„ æˆæ¬Š (License)
MIT License